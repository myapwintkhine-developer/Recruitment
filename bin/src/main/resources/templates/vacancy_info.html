<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Ace Data Systems</title>
<link rel="stylesheet" th:href="@{/vendors/feather/feather.css}">
<link rel="stylesheet"
	th:href="@{/vendors/ti-icons/css/themify-icons.css}">
<link rel="stylesheet" th:href="@{/vendors/css/vendor.bundle.base.css}">
<link rel="stylesheet"
	th:href="@{/vendors/datatables.net-bs4/dataTables.bootstrap4.css}">
<link rel="stylesheet"
	th:href="@{/vendors/ti-icons/css/themify-icons.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/js/select.dataTables.min.css}">
<link rel="stylesheet" th:href="@{/css/vertical-layout-light/style.css}">
<link rel="shortcut icon" th:href="@{/images/ACEDataSystemFull}" />
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body {
	background-color: #F5F7FF;
}

.auth-form-light {
	background-color: #FFFFFF;
	margin: 0 auto;
	padding: 40px;
	max-width: 500px;
	box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

label {
	font-weight: bold;
}

#description, #responsibilities, #requirements, #preferences {
	height: auto;
	transition: height 0.2s;
	resize: none;
}

.expandable-textarea {
	overflow: hidden;
	resize: none;
	border: none;
	background-color: transparent;
}

.no-background {
	background-color: transparent !important;
}
</style>
</head>

<body>
	<div class="container-scroller">
		<!-- partial:partials/_navbar.html -->
		<nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex ">
			<div
				class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
				<a class="navbar-brand brand-logo mr-5" href="index.html"><img
					th:src="@{/images/ACEDataSystemFull.jpg}" class="mr-2" alt="logo"
					width="80rem" height="50rem" /></a> <a
					class="navbar-brand brand-logo-mini mr5" href="index.html"><img
					th:src="@{/images/ACEDataSystemFull.jpg}" class="mr-2" alt="logo"
					width="80rem" height="50rem" /></a>
			</div>
			<div
				class="navbar-menu-wrapper d-flex align-items-center justify-content-end">

				<ul class="navbar-nav mr-lg-2">
					<li class="nav-item nav-search d-lg-block"><a class="nav-item"
						th:href="@{/candidate/}"><button class="btn btn-light btn-md">Home</button></a>
						<a class="nav-item" th:href="@{/candidate/}"><button
								class="btn btn-light btn-md">Jobs</button></a> <a class="nav-item"
						th:href="@{/candidate/about}"><button
								class="btn btn-light btn-md">About</button></a></li>

				</ul>
			</div>
		</nav>



		<div class="main-panel" style="width: 100%; margin-top: 3rem;">
			<div class="content-wrapper">
				<section class="job-detail-section">
					<div class="upper-box">
						<div class="auto-container">
							<div class="inner-box">
								<div class="row">
									<div class="col-2 text-right">
										<span class="logo"><img
											th:src="@{/images/ACEDataSystemFull.jpg}"></span>
									</div>
									<div class="col-8 text-left">
										<div>
											<h3 th:text="*{vacancyInfo.position.name}"></h3>
										</div>
										<div class="d-flex job-info mt-3">
											<div class="mr-4">
												<i class="ti-user text-info"></i> <span
													th:text="*{vacancyInfo.count}"></span>
											</div>
											<div class="mr-4">
												<i class="ti-location-pin text-info"></i> <span
													th:text="*{vacancyInfo.department.address}"></span>
											</div>
											<div class="mr-4">
												<i class="ti-timer text-info"></i> <span
													th:text="*{vacancyInfo.createdDate}"></span>
											</div>
											<div>
												<i class="ti-wallet text-info"></i> <span
													th:text="*{vacancyInfo.salary}"></span>
											</div>
										</div>
										<div class="d-flex mt-3">
											<div class="mr-2">
												<span class="badge rounded-pill badge-info text-white"
													th:text="*{vacancyInfo.type}"></span>
											</div>
											<div>
												<span th:if="${vacancyInfo.urgent == true}"
													class="badge rounded-pill badge-primary text-white">Urgent</span>
											</div>
										</div>
									</div>

									<div class="col-2 mt-3 text-center">
										<div class="btn-box">
											<button class="btn btn-info" type="button"
												data-bs-toggle="modal" data-bs-target="#candidateModel">Apply
												Now</button>
										</div>
									</div>

								</div>
								<div class="modal fade"></div>
							</div>
							<div class="outer-box bg-white mt-5 rounded">
								<div class="container">
									<div class="row">
										<div class="job-content col-lg-8 col-md-12 col-sm-12">
											<div class="mt-5 ml-0">
												<h3>Job Description</h3>
												<p th:text="*{vacancyInfo.description}"
													class="text-wrap mt-4"></p>
												<h3 class="mt-4 mb-4">Job Responsibilities</h3>
												<ul class="mt-4 mb-4">
													<li class="mb-4"
														th:each="responsibility :  ${responsibilities}"><span
														th:text="${responsibility}"></span></li>
												</ul>
												<h3 class="mt-4 mb-4">Job Requirements</h3>
												<ul class="mt-4 mb-4">
													<li class="mb-4" th:each="requirement :  ${requirements}">
														<span th:text="${requirement}"></span>
													</li>
												</ul>
												<h3 class="mt-4 mb-4">Job Preferences</h3>
												<ul class="mt-4 mb-4">
													<li class="mb-4" th:each="preference :  ${preferences}">
														<span th:text="${preference}"></span>
													</li>
												</ul>
											</div>
										</div>
										<div class="col-lg-4 col-md-12 col-sm-12">
											<div class="card rounded mt-5"
												style="width: 18rem; background-color: #f5f7fcff;">
												<div class="card-body">
													<h3 class="card-title">Job Overview</h3>
													<div class="job-info p-3">
														<div class="row mb-5">
															<div class="col-3">
																<div class="d-flex flex-column">
																	<i class="ti-calendar text-info"></i>
																</div>
															</div>
															<div class="col-9">
																<div class="d-flex flex-column text-left">
																	<h5>Date Posted:</h5>
																	<span th:text="*{vacancyInfo.createdDate}"></span>
																</div>
															</div>
														</div>
														<div class="row mb-5">
															<div class="col-3">
																<div class="d-flex flex-column">
																	<i class="ti-time text-info"></i>
																</div>
															</div>
															<div class="col-9">
																<div class="d-flex flex-column text-left">
																	<h5>Expiration Date:</h5>
																	<span th:text="*{vacancyInfo.dueDate}"></span>
																</div>
															</div>
														</div>
														<div class="row mb-5">
															<div class="col-3">
																<div class="d-flex flex-column">
																	<i class="ti-location-pin text-info"></i>
																</div>
															</div>
															<div class="col-9">
																<div class="d-flex flex-column text-left">
																	<h5>Job Location:</h5>
																	<span th:text="*{vacancyInfo.department.address}"></span>
																</div>
															</div>
														</div>
														<div class="row mb-5">
															<div class="col-3">
																<div class="d-flex flex-column">
																	<i class="ti-user text-info"></i>
																</div>
															</div>
															<div class="col-9">
																<div class="d-flex flex-column text-left">
																	<h5>Job Position:</h5>
																	<span th:text="*{vacancyInfo.position.name}"></span>
																</div>
															</div>
														</div>
														<div class="row mb-5">
															<div class="col-3">
																<div class="d-flex flex-column">
																	<i class="ti-wallet text-info"></i>
																</div>
															</div>
															<div class="col-9">
																<div class="d-flex flex-column text-left">
																	<h5>Salary:</h5>
																	<span th:text="*{vacancyInfo.salary}"></span>
																</div>
															</div>
														</div>
													</div>

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Modal Start -->

							<div class="modal fade" id="candidateModel" tabindex="-1"
								aria-labelledby="candidateModelLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">

										<div class="modal-header">
											<button type="button" class="btn-close btn-secondary"
												data-bs-dismiss="modal"
												style="margin-right: 10px; margin-top: 10px;"
												aria-label="Close"></button>
										</div>
										<form action="/candidate/register" method="post"
											enctype="multipart/form-data" id="myForm">
											<div class="modal-body">

												<div class="row">
													<div class="form-group">
														<div
															class="text-center bg-primary text-white text-center btn-sm">
															<h3>Job Application</h3>
														</div>
													</div>
													<!-- for name and email -->
													<div class="col-sm-6">
														<div class="form-group">
															<label for="name">Name</label> <input type="text"
																class="form-control" id="name" name="name"
																placeholder="Enter your name.">
															<div id="nameValidationMessage" class="invalid-feedback"></div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="email">Email</label> <input type="email"
																class="form-control" name="email" id="email"
																placeholder="example@example.com">
															<div id="emailValidationMessage" class="invalid-feedback"></div>
														</div>
													</div>
													<!-- end name and email -->
													<!-- start dob and ph no. -->
													<div class="col-sm-6">
														<div class="form-group">
															<label for="dob">Birthday</label> <input type="date"
																class="form-control" name="dob" id="dob">
															<div id="dobValidationMessage" class="invalid-feedback">At
																Least,You should be 18 years old.</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="phone">Phone Number</label> <input
																type="text" class="form-control" id="phone" name="phone"
																aria-describedby="basic-addon1"
																placeholder="Enter Your Phone." maxlength="13">
															<div id="phoneValidationMessage" class="invalid-feedback"></div>
														</div>
													</div>
													<!-- end dob and ph no. -->
													<!-- gender and lvl -->
													<div class="col-sm-6">
														<div class="form-group">
															<label>Gender</label>
															<div class="row"
																style="position: relative; left: 1.5rem; width: 13rem">
																<div class="col-6">
																	<div class="form-check" style="height: 1.65rem">
																		<input class="form-check-input" type="radio" value="0"
																			id="male" name="gender" checked> <label
																			class="form-check-label" for="male"> Male </label>
																	</div>
																</div>
																<div class="col-6">
																	<div class="form-check">
																		<input class="form-check-input" type="radio" value="1"
																			id="female" name="gender"> <label
																			class="form-check-label" for="female"> Female
																		</label>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="levelSelect">Please choose your
																level.</label>
															<div class="dropdown input-group">
																<select class="custom-select" id="levelSelect"
																	name="level">
																	<option selected>Please Choose Level</option>
																	<option value="Low">Low</option>
																	<option value="Mid">Mid</option>
																	<option value="High">High</option>
																</select>
															</div>
															<div id="levelValidationMessage" class="invalid-feedback">Please
																select your level.</div>
														</div>
													</div>
													<!-- gender and lvl -->
													<!-- Tech Skill and education -->
													<div class="col-sm-6">
														<div class="form-group">
															<label for="techSkill">Technical Skill</label>
															<textarea type="text" class="form-control"
																name="techSkill" id="techSkill"
																placeholder="Enter Your Technical skills"></textarea>
															<div id="techSkillValidationMessage"
																class="invalid-feedback">Technical Skill cannot
																empty.</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="education">Education</label>
															<textarea type="text" class="form-control" id="education"
																name="education" placeholder="Your Education Level."></textarea>
															<div id="educationValidationMessage"
																class="invalid-feedback">Education cannot empty.</div>
														</div>
													</div>
													<!-- Tech Skill and education -->
													<!-- exp and language -->
													<div class="col-sm-6">
														<div class="form-group">
															<label for="exp">Work Experience</label>
															<textarea type="text" class="form-control" id="exp"
																name="exp" placeholder="Work Experience"></textarea>
															<div id="expValidationMessage" class="invalid-feedback"></div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="languageSkill">Language Skill</label>
															<textarea type="text" class="form-control"
																name="languageSkill" id="languageSkill"
																placeholder="Which languages do you express?"></textarea>
															<div id="languageSkillValidationMessage"
																class="invalid-feedback"></div>
														</div>
													</div>
													<!-- exp and language -->
													<!-- main-tech & expected-salary -->
													<div class="col-sm-6">
														<div class="form-group">
															<label for="mainTech">Main Specialist Technology</label>
															<input type="text" class="form-control" name="mainTech"
																id="mainTech" placeholder="Enter specialize technology">
															<div id="mainTechValidationMessage"
																class="invalid-feedback"></div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="form-group">
															<label for="expectedSalary">Expected Salary</label> <input
																type="text" class="form-control" id="expectedSalary"
																name="expectedSalary"
																placeholder="Please enter expected salary.">
															<div id="expectedSalaryValidationMessage"
																class="invalid-feedback"></div>
														</div>
													</div>
													<!-- main-tech & expected-salary -->
												</div>

												<div class="form-group">
													<label for="file" style="display: block;">Upload
														Your CV (Word, PDF)</label> <input type="file"
														class="form-control btn-primary" id="file" name="file"
														accept=".docx, .pdf"> <input type="hidden"
														name="vacancyId" th:value="${vacancyInfo.id}">
													<div id="fileValidationMessage" class="invalid-feedback">Please
														select your cv form.</div>
												</div>
												<p>*Please double check your informations before
													sumitting</p>
											</div>
											<div class="modal-footer">
												<span style="position: relative; right: .3rem"><button
														type="button" class="btn btn-secondary btn-md"
														data-bs-dismiss="modal">Close</button></span>
												<button type="submit" class="btn btn-primary btn-md"
													id="submitButton">Submit</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<!-- Modal End -->


						</div>
					</div>
			</div>
			</section>
		</div>
	</div>
	</div>
	<script>
		function autoExpandTextarea() {
			var textareas = document
					.getElementsByClassName('expandable-textarea');

			for (var i = 0; i < textareas.length; i++) {
				textareas[i].style.height = 'auto';
				textareas[i].style.height = textareas[i].scrollHeight + 'px';
			}
		}

		function setupAutoExpand() {
			autoExpandTextarea();

			var textareas = document
					.getElementsByClassName('expandable-textarea');

			for (var i = 0; i < textareas.length; i++) {
				textareas[i].addEventListener('input', autoExpandTextarea);
			}
		}

		// Call the function initially to set the proper heights
		setupAutoExpand();
	</script>
	<script th:src="@{/vendors/js/vendor.bundle.base.js}"></script>
	<script>
    document.addEventListener('DOMContentLoaded', function () {
        const submitButton = document.getElementById('submitButton');
        const form = document.getElementById('myForm');

        function hasRepeatedCharacters(name) {
            const consecutiveCharactersRegex = /(.)\1{2,}/;
            return consecutiveCharactersRegex.test(name);
        }

        function validateForm() {

            let isValid = true;

            const nameInput = document.getElementById('name');
            const nameRegex = /^[A-Z][A-Za-z]*(?: [A-Z][A-Za-z]*)*$/;
            const nameValidationMessage = document.getElementById('nameValidationMessage');
            const maxLength = 50; // Maximum allowed length for the name (change this value as needed)

            // Function to check if the name is valid
            function validateName() {
                if (!nameInput.value.trim()) {
                    nameInput.classList.remove('is-valid');
                    nameInput.classList.add('is-invalid');
                    nameValidationMessage.textContent = 'Name cannot be empty.';
                    isValid = false;
                } else if (!nameRegex.test(nameInput.value)) {
                    nameInput.classList.remove('is-valid');
                    nameInput.classList.add('is-invalid');
                    nameValidationMessage.textContent = 'Please enter a valid name starting with a capital letter and containing only letters and spaces.';
                    isValid = false;
                } else if (hasRepeatedCharacters(nameInput.value)) {
                    nameInput.classList.remove('is-valid');
                    nameInput.classList.add('is-invalid');
                    nameValidationMessage.textContent = 'Name cannot have three or more consecutive repeated characters.';
                    isValid = false;
                } else if (nameInput.value.length > maxLength) {
                    nameInput.classList.remove('is-valid');
                    nameInput.classList.add('is-invalid');
                    nameValidationMessage.textContent = `Name cannot exceed ${maxLength} characters.`;
                    isValid = false;
                } else {
                    nameInput.classList.remove('is-invalid');
                    nameInput.classList.add('is-valid');
                    nameValidationMessage.textContent = '';
                }
            }

            // Add an input event listener to trigger validation on user input
            nameInput.addEventListener('input', validateName);


            // Validate Email
            const emailInput = document.getElementById('email');
			const emailValidationMessage = document.getElementById('emailValidationMessage');
			
			const emailRegex = /^.+@.+\.com$/;
			let isEmailInputTouched = false;
			
			// Function to check if the email is valid
			function validateEmail() {
			    const emailInputValue = emailInput.value.trim(); // Remove leading and trailing spaces
			
			    if (!isEmailInputTouched) {
			    	 emailInput.classList.remove('is-valid');
                        emailInput.classList.add('is-invalid');
                        emailValidationMessage.textContent = 'Email cannot be empty.';
                        isValid = false;
			    }
			    if (!emailInputValue) {
			        emailInput.classList.remove('is-valid');
			        emailInput.classList.add('is-invalid');
			        emailValidationMessage.textContent = 'Email address is required.';
			        isValid = false;
			    } else if (!emailRegex.test(emailInputValue)) {
			        emailInput.classList.remove('is-valid');
			        emailInput.classList.add('is-invalid');
			        emailValidationMessage.textContent = 'Please enter a valid email address.';
			        isValid = false;
			    } else {
			        emailInput.classList.remove('is-invalid');
			        emailInput.classList.add('is-valid');
			        emailValidationMessage.textContent = '';
			    }
			}
			// Add an input event listener to trigger validation on user input
			emailInput.addEventListener('input', validateEmail);

            // Validate Date of Birth
            const dobInput = document.getElementById('dob');
			const currentDate = new Date();
			const minAge = 18;
			const minAgeDate = new Date(currentDate.getFullYear() - minAge, currentDate.getMonth(), currentDate.getDate());
			
			// Function to check if the date of birth is valid
			function validateDOB() {
			    const dobDate = new Date(dobInput.value);
			
			    if (!dobInput.value) {
			        dobInput.classList.remove('is-invalid', 'is-valid');
			        isValid = false;
			    } else if (dobDate >= minAgeDate) {
			        dobInput.classList.remove('is-valid');
			        dobInput.classList.add('is-invalid');
			        isValid = false;
			    } else {
			        dobInput.classList.remove('is-invalid');
			        dobInput.classList.add('is-valid');
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			dobInput.addEventListener('input', () => {
			    validateDOB();
			});
			
			// Call the validation function initially to handle the initial state
			validateDOB();


            // Validate Phone
            const phoneInput = document.getElementById('phone');
			const phoneValidationMessage = document.getElementById('phoneValidationMessage');
			
			// Function to validate phone number
			function validatePhoneNumber() {
			    const phoneInputValue = phoneInput.value.trim();
			
			    // Remove any non-digit characters except '+'
			    phoneInput.value = phoneInputValue.replace(/[^+\d]/g, '');
			
			    const cleanedPhoneInputValue = phoneInput.value;
			
			    if (!cleanedPhoneInputValue && phoneInput.classList.contains('is-valid')) {
			        // The phone number was previously valid, but now it is empty
			        phoneInput.classList.remove('is-valid');
			        phoneInput.classList.add('is-invalid');
			        phoneValidationMessage.textContent = 'Phone number is required.';
			        isValid = false;
			    } else if (cleanedPhoneInputValue.length > 14) {
			        phoneInput.classList.remove('is-valid');
			        phoneInput.classList.add('is-invalid');
			        phoneValidationMessage.textContent = 'Phone number cannot exceed 14 characters.';
			        isValid = false;
			    } else {
			        const plusRegex = /^\+\d{5,12}$/;
			        const zeroRegex = /^09\d{5,9}$/;
			        const oneRegex = /^01\d{5}$/;
			
			        if (!plusRegex.test(cleanedPhoneInputValue) && !zeroRegex.test(cleanedPhoneInputValue) && !oneRegex.test(cleanedPhoneInputValue)) {
			            phoneInput.classList.remove('is-valid');
			            phoneInput.classList.add('is-invalid');
			            phoneValidationMessage.textContent = 'Please enter a valid phone number.';
			            isValid = false;
			        } else {
			            phoneInput.classList.remove('is-invalid');
			            phoneInput.classList.add('is-valid');
			            phoneValidationMessage.textContent = '';
			        }
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			phoneInput.addEventListener('input', validatePhoneNumber);

            //Technical Skill validate
           const techSkillInput = document.getElementById('techSkill');
			const techSkillValidationMessage = document.getElementById('techSkillValidationMessage');
			
			// Function to validate technical skills input
			function validateTechSkillInput() {
			    const techSkillInputValue = techSkillInput.value.trim();
			
			    if (!isTechSkillInputTouched) {
			        // The validation message should not appear at startup
			        techSkillValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!techSkillInputValue) {
			        // The technical skills input is empty after user interaction
			        techSkillInput.classList.remove('is-valid');
			        techSkillInput.classList.add('is-invalid');
			        techSkillValidationMessage.textContent = 'Tech Skill is required.';
			        isValid = false;
			    } else {
			        techSkillInput.classList.remove('is-invalid');
			        techSkillInput.classList.add('is-valid');
			        techSkillValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isTechSkillInputTouched = false;
			
			techSkillInput.addEventListener('input', () => {
			    isTechSkillInputTouched = true;
			    validateTechSkillInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateTechSkillInput();

			
            //main technical
			const mainTechInput = document.getElementById('mainTech');
			const mainTechValidationMessage = document.getElementById('mainTechValidationMessage');
			
			// Function to validate main specialized technology input
			function validateMainTechInput() {
			    const mainTechInputValue = mainTechInput.value.trim();
			
			    if (!isMainTechInputTouched) {
			        // The validation message should not appear at startup
			        mainTechValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!mainTechInputValue) {
			        // The main specialized technology input is empty after user interaction
			        mainTechInput.classList.remove('is-valid');
			        mainTechInput.classList.add('is-invalid');
			        mainTechValidationMessage.textContent = 'Main specialized technology is required.';
			        isValid = false;
			    } else {
			        mainTechInput.classList.remove('is-invalid');
			        mainTechInput.classList.add('is-valid');
			        mainTechValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isMainTechInputTouched = false;
			
			mainTechInput.addEventListener('input', () => {
			    isMainTechInputTouched = true;
			    validateMainTechInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateMainTechInput();

            //Education validation
            const educationInput = document.getElementById('education');
			const educationValidationMessage = document.getElementById('educationValidationMessage');
			
			// Function to validate education level input
			function validateEducationInput() {
			    const educationInputValue = educationInput.value.trim();
			
			    if (!isEducationInputTouched) {
			        // The validation message should not appear at startup
			        educationValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!educationInputValue) {
			        // The education level input is empty after user interaction
			        educationInput.classList.remove('is-valid');
			        educationInput.classList.add('is-invalid');
			        educationValidationMessage.textContent = 'Education level is required.';
			        isValid = false;
			    } else {
			        educationInput.classList.remove('is-invalid');
			        educationInput.classList.add('is-valid');
			        educationValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isEducationInputTouched = false;
			
			educationInput.addEventListener('input', () => {
			    isEducationInputTouched = true;
			    validateEducationInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateEducationInput();


            //language validate
            const languageSkillInput = document.getElementById('languageSkill');
			const languageSkillValidationMessage = document.getElementById('languageSkillValidationMessage');
			
			// Function to validate language skills input
			function validateLanguageSkillInput() {
			    const languageSkillInputValue = languageSkillInput.value.trim();
			
			    if (!isLanguageSkillInputTouched) {
			        // The validation message should not appear at startup
			        languageSkillValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!languageSkillInputValue) {
			        // The language skills input is empty after user interaction
			        languageSkillInput.classList.remove('is-valid');
			        languageSkillInput.classList.add('is-invalid');
			        languageSkillValidationMessage.textContent = 'Language skills are required.';
			        isValid = false;
			    } else {
			        languageSkillInput.classList.remove('is-invalid');
			        languageSkillInput.classList.add('is-valid');
			        languageSkillValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isLanguageSkillInputTouched = false;
			
			languageSkillInput.addEventListener('input', () => {
			    isLanguageSkillInputTouched = true;
			    validateLanguageSkillInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateLanguageSkillInput();


            // Validate Expected Salary
            const expectedSalaryInput = document.getElementById('expectedSalary');
			const expectedSalaryValidationMessage = document.getElementById('expectedSalaryValidationMessage');
			
			// Function to validate expected salary input
			function validateExpectedSalaryInput() {
			    const expectedSalaryInputValue = expectedSalaryInput.value.trim();
			
			    if (!isExpectedSalaryInputTouched) {
			        // The validation message should not appear at startup
			        expectedSalaryValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!expectedSalaryInputValue) {
			        // The expected salary input is empty after user interaction
			        expectedSalaryInput.classList.remove('is-valid');
			        expectedSalaryInput.classList.add('is-invalid');
			        expectedSalaryValidationMessage.textContent = 'Please enter your expected salary.';
			        isValid = false;
			    } else {
			        expectedSalaryInput.classList.remove('is-invalid');
			        expectedSalaryInput.classList.add('is-valid');
			        expectedSalaryValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isExpectedSalaryInputTouched = false;
			
			expectedSalaryInput.addEventListener('input', () => {
			    isExpectedSalaryInputTouched = true;
			    validateExpectedSalaryInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateExpectedSalaryInput();


            //exp validate
            const expInput = document.getElementById('exp');
			const expValidationMessage = document.getElementById('expValidationMessage');
			
			// Function to validate work experience input
			function validateExpInput() {
			    const expInputValue = expInput.value.trim();
			
			    if (!isExpInputTouched) {
			        // The validation message should not appear at startup
			        expValidationMessage.textContent = '';
			        return;
			    }
			
			    if (!expInputValue) {
			        // The work experience input is empty after user interaction
			        expInput.classList.remove('is-valid');
			        expInput.classList.add('is-invalid');
			        expValidationMessage.textContent = 'Please enter your work experience.';
			        isValid = false;
			    } else {
			        expInput.classList.remove('is-invalid');
			        expInput.classList.add('is-valid');
			        expValidationMessage.textContent = '';
			    }
			}
			
			// Add an input event listener to trigger validation on user input
			let isExpInputTouched = false;
			
			expInput.addEventListener('input', () => {
			    isExpInputTouched = true;
			    validateExpInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateExpInput();

			//File validate
            const fileInput = document.getElementById('file');
			const fileValidationMessage = document.getElementById('fileValidationMessage');
			const allowedFileExtensions = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
			
			// Function to validate the selected file
			function validateFileInput() {
			    if (!isFileInputTouched) {
			        // The validation message should not appear at startup
			        fileValidationMessage.textContent = '';
			        return;
			    }
			
			    if (fileInput.files.length === 0 || !allowedFileExtensions.includes(fileInput.files[0].type)) {
			        // No file selected or the selected file type is not allowed
			        fileInput.classList.remove('is-valid');
			        fileInput.classList.add('is-invalid');
			        fileValidationMessage.textContent = 'Please select a valid CV file in PDF or Word (DOCX) format.';
			        isValid = false;
			    } else {
			        fileInput.classList.remove('is-invalid');
			        fileInput.classList.add('is-valid');
			        fileValidationMessage.textContent = '';
			    }
			}
			
			// Add a change event listener to trigger validation when the file input value changes
			let isFileInputTouched = false;
			
			fileInput.addEventListener('change', () => {
			    isFileInputTouched = true;
			    validateFileInput();
			});
			
			// Call the validation function initially to handle the initial state
			validateFileInput();


            // Enable or disable the submit button based on the validation result
            submitButton.disabled = !isValid;

            return isValid;
        }

        function validateAndEnableSubmitButton() {
            const submitButton = form.querySelector('#submitButton');
            submitButton.disabled = !validateForm();
        }

        form.addEventListener('submit', function (event) {

            if (validateForm()) {
                // Form is valid, you can submit it
                // For demonstration purposes, let's just log a success message here
                console.log('Form is valid. Submitting...');
                // Uncomment the following line to submit the form:
                // form.submit();
            } else {
                // Form is not valid, prevent submission and display an error message
                console.log('Form is not valid. Please check the fields.');
            }
        });

        // Attach input event listeners to re-validate the form on input change
        form.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('input', validateAndEnableSubmitButton);
        });

        // Validate and enable/disable the submit button on page load
        validateAndEnableSubmitButton();
    });
</script>


<script>
	function autoExpandTextarea() {
		var textareas = document
				.getElementsByClassName('expandable-textarea');

		for (var i = 0; i < textareas.length; i++) {
			textareas[i].style.height = 'auto';
			textareas[i].style.height = textareas[i].scrollHeight + 'px';
		}
	}

	function setupAutoExpand() {
		autoExpandTextarea();

		var textareas = document
				.getElementsByClassName('expandable-textarea');

		for (var i = 0; i < textareas.length; i++) {
			textareas[i].addEventListener('input', autoExpandTextarea);
		}
	}

	// Call the function initially to set the proper heights
	setupAutoExpand();
	
	</script>
	<!-- endinject -->
	<!-- Plugin js for this page -->
	<script th:src="@{/vendors/chart.js/Chart.min.js}"></script>
	<script th:src="@{/vendors/datatables.net/jquery.dataTables.js}"></script>
	<script
		th:src="@{/vendors/datatables.net-bs4/dataTables.bootstrap4.js}"></script>
	<script th:src="@{/js/dataTables.select.min.js}"></script>

	<!-- End plugin js for this page -->
	<!-- inject:js -->
	<script th:src="@{/js/off-canvas.js}"></script>
	<script th:src="@{/js/hoverable-collapse.js}"></script>
	<script th:src="@{/js/template.js}"></script>
	<script th:src="@{/js/settings.js}"></script>
	<script th:src="@{/js/todolist.js}"></script>
	<!-- endinject -->
	<!-- Custom js for this page-->
	<script th:src="@{/js/dashboard.js}"></script>
	<script th:src="@{/js/Chart.roundedBarCharts.js}"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
		crossorigin="anonymous"></script>
	<!-- End custom js for this page-->
</body>

</html>